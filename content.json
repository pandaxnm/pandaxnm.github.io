{"pages":[{"title":"å…³äºæˆ‘","text":"å› ä¸ºå¾ˆèœï¼Œæ‰€ä»¥ä¸æ–­å­¦ä¹ ä¸­â€¦","link":"/about/index.html"}],"posts":[{"title":"ç®€å•çš„æ¥å£åŠ å¯†","text":"åœ¨å‰åç«¯çš„æ•°æ®ä¼ è¾“ä¸­ï¼Œä¸ºäº†ä¿è¯æ•°æ®å®‰å…¨ç­‰åŸå› ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ã€‚ æµç¨‹å®¢æˆ·ç«¯å‘é€è¯·æ±‚å‰åŠ å¯†ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°æ•°æ®åè§£å¯†æœåŠ¡ç«¯è¿”å›æ•°æ®å‰åŠ å¯†ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°æ•°æ®åè§£å¯† åŠ å¯†æ–¹å¼åŠ å¯†æ–¹å¼é‡‡ç”¨ aes-128-cbcå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„keyå’Œivè¦ä¿æŒä¸€è‡´ å®ç°å®¢æˆ·ç«¯ä»¥VUEä¸ºä¾‹ åˆ›å»ºä¸€ä¸ªåä¸º encrypt.js çš„æ–‡ä»¶ï¼Œç”¨äºå¯¹æ•°æ®åŠ å¯†è§£å¯† è®°å¾—å…ˆå®‰è£…æ‰©å±• 1yarn add crypto-js 12345678910111213141516171819202122import CryptoJS from 'crypto-js/crypto-js'const key = CryptoJS.enc.Utf8.parse(\"1234123412ABCDEF\");const iv = CryptoJS.enc.Utf8.parse('ABCDEF1234123412');//è§£å¯†export function Decrypt(data) { let decryptedData = CryptoJS.AES.decrypt(data, key, { iv: iv, mode: CryptoJS.mode.CBC, padding: CryptoJS.pad.Pkcs7 }); let decryptedStr = decryptedData.toString(CryptoJS.enc.Utf8); return decryptedStr.toString();}//åŠ å¯†export function Encrypt(data) { let string = CryptoJS.enc.Utf8.parse(JSON.stringify(data)); let encrypted = CryptoJS.AES.encrypt(string, key, { iv: iv, mode: CryptoJS.mode.CBC, padding: CryptoJS.pad.Pkcs7 }); return encrypted.toString();} åˆ›å»ºHTTPè¯·æ±‚æ–‡ä»¶ http.js è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨axios+qsï¼ŒåŒæ ·ï¼Œè®°å¾—å®‰è£…æ‰©å±• 12yarn add axiosyarn add qs 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667import { Encrypt, Decrypt } from './aes';import axios from '@/js_sdk/gangdiedao-uni-axios'import qs from 'qs';const service = axios.create({ baseURL: '/api', // withCredentials: true, timeout: 10000});//å‘é€è¯·æ±‚å‰å¯¹æ•°æ®åŠ å¯†service.interceptors.request.use( config =&gt; { if(config.method === 'post'){ let encrypt = {encryptedData: Encrypt(config.data)}; config.data = qs.stringify(encrypt) }else{ let encrypt = {encryptedData:Encrypt(config.params)}; config.params = encrypt; } return config });//æ”¶åˆ°å“åº”åè§£å¯†æ•°æ®service.interceptors.response.use( response =&gt; { const res = JSON.parse(Decrypt(response.data)); return res }, error =&gt; { return Promise.reject(error) });export function get(url, data = {},) { return new Promise((resolve,reject) =&gt; { service.get(url, { params: data, }) .then((response) =&gt; { return response; }) .then(response =&gt; { resolve(response); },err =&gt; { reject(err) }) })}export function post(url,data = {}){ return new Promise((resolve,reject) =&gt; { service.post(url, data) .then((response) =&gt; { return response; }) .then(response =&gt; { resolve(response); },err =&gt; { reject(err) }) })} è¿™æ ·ï¼Œå®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚æ˜¯è¿™ä¸ªæ ·å­ï¼š https://example.com/api/user?encryptedData=LJGKLSDA34FJSLKDFJF æœåŠ¡ç«¯ å®šä¹‰åŠ å¯†è§£å¯†æ–¹æ³• 1234567891011121314151617181920212223const KEY = '1234123412ABCDEF';const IV = 'ABCDEF1234123412';/** * è§£å¯† * @param $data * @return mixed */public function decrypt($data) { $cryptText = base64_decode($data); $decrypted = trim(openssl_decrypt($cryptText, 'aes-128-cbc', self::KEY, OPENSSL_RAW_DATA,self::IV)); return json_decode($decrypted, true);}/** * åŠ å¯† * @param $data * @return string */public function encrypt($data) { $cryptText = openssl_encrypt($data,\"aes-128-cbc\",self::KEY,OPENSSL_RAW_DATA,self::IV); return base64_encode($cryptText);} ä½¿ç”¨ è§£å¯† 12345678910$request = Yii::$app-&gt;getRequest();if($method == 'post'){ $encryptedData = $request-&gt;post('encryptedData');}else{ $encryptedData = $request-&gt;get('encryptedData');}if (!$encryptedData) { return [];}$decrypted = $this-&gt;decrypt($encryptedData); åŠ å¯† 12345$data = [ 'name' =&gt; 'panda', 'age' =&gt; 18,]$encrypted = $this-&gt;encrypt(json_encode($data));","link":"/2020/01/05/api-simple-encrypt/"},{"title":"Macä¸Šä½¿ç”¨Homebrewæ­å»ºLNMPç¯å¢ƒï¼ˆç®€è¦ç‰ˆï¼‰","text":"æœ€è¿‘å‘ç°è‡ªå·±è¿™å°Macå……ç”µå£å·²ç»ç³Šæ‰äº†ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ—¶å€™å‘çƒ­ä¸¥é‡ï¼Œäºæ˜¯å‘å…¬å¸ç”³è¯·äº†ä¸€å°ã€‚ ç»“æœç»™äº†æˆ‘ä¸€å°13å¯¸çš„ï¼Œè€Œä¸”é”®ç›˜ç£¨å¾—æ¼†éƒ½æ‰äº†ã€‚ğŸ¤£ æ‹¿åˆ°æ‰‹ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯å’”å’”é‡è£…ç³»ç»Ÿï¼Œç„¶åå¼€å§‹è£…å¼€å‘ç¯å¢ƒã€‚ ä¸€ã€å®‰è£…Homebrew1.å®‰è£…comman line Homebrew æ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œç”¨äºåœ¨Macä¸Šå®‰è£…ä¸€äº›OS Xæ²¡æœ‰çš„UNIXå·¥å…· 1xcode-select --install å¦‚æœæç¤ºå¤±è´¥ï¼Œè¯·å°è¯•æ‰‹åŠ¨å®‰è£…åˆ°è¿™ä¸ªåœ°å€ https://developer.apple.com/download/more/ ä¸‹è½½Command Line Toolsï¼Œé€‰æ‹©é€‚åˆè‡ªå·±çš„ç‰ˆæœ¬ã€‚ 2.å®‰è£…Homebrewè¿è¡Œä¸‹é¢çš„å‘½ä»¤å³å¯å®‰è£…Homebrewï¼Œå®‰è£…å¼€å§‹å‰ä¼šæœ‰æç¤ºï¼ŒåŒæ„å³å¯ã€‚ 1/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" äºŒã€å®‰è£…Nginxè¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£… 1brew install nginx å®‰è£…å®Œæˆåå°†NginxåŠ å…¥å¼€æœºè‡ªå¯ 12cp /usr/local/opt/nginx/homebrew.mxcl.nginx.plist ~/Library/LaunchAgents/launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.nginx.plist ç»™Nginx rootæƒé™ (è·¯å¾„æ ¹æ®ç‰ˆæœ¬è€Œå®š) 12sudo chown root:wheel /usr/local/Cellar/nginx/1.6.0_1/bin/nginxsudo chmod u+s /usr/local/Cellar/nginx/1.6.0_1/bin/nginx å¦‚æœnginxå¯åŠ¨æŠ¥é”™ï¼šnginx: [error] open() &quot;/usr/local/var/run/nginx.pid&quot; failed (2: No such file or directory) æ‰§è¡Œ 1sudo nginx -c /usr/local/etc/nginx/nginx.conf ä¸‰ã€å®‰è£…MySql1brew install mysql@5.7 å®‰è£…å®Œæˆåå¼€å¯mysqlï¼š 1/usr/local/opt/mysql@5.7/bin/mysql.server start ç„¶åè®¾ç½®å¯†ç ï¼š 1/usr/local/opt/mysql@5.7/bin/mysql_secure_installation æ ¹æ®æç¤ºæ“ä½œå³å¯ å°†MySqlåŠ å…¥å¼€æœºè‡ªå¯ï¼ˆè·¯å¾„æ ¹æ®ç‰ˆæœ¬è€Œå®šï¼‰ 12cp /usr/local/opt/mysql@5.7/homebrew.mxcl.mysql@5.7.plist ~/Library/LaunchAgents/launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.mysql@5.7.plist å››ã€å®‰è£…PHP1.å®‰è£…PHP1brew install php@7.1 å°†phpåŠ å…¥ç¯å¢ƒå˜é‡ï¼Œè¿è¡Œï¼š 12echo 'export PATH=\"/usr/local/opt/php@7.1/bin:$PATH\"' &gt;&gt; ~/.bash_profileecho 'export PATH=\"/usr/local/opt/php@7.1/sbin:$PATH\"' &gt;&gt; ~/.bash_profile å…³é—­ç»ˆç«¯ï¼Œé‡æ–°æ‰“å¼€ 2.å®‰è£…PHPæ‰©å±•æˆ‘ä»¬å¯ä»¥ä½¿ç”¨peclå‘½ä»¤æ¥å®‰è£…PHPæ‹“å±•ï¼Œå¦‚æœä½ å®‰è£…çš„PHPç‰ˆæœ¬&gt;=7.1ï¼Œpeclä¹Ÿä¸€åŒå®‰è£…å¥½äº†ã€‚ ä½¿ç”¨peclå®‰è£…æ‹“å±•ï¼Œåªéœ€æ‰§è¡Œå‘½ä»¤å³å¯ï¼Œå…¶ä»–çš„ä¼šç»™ä½ è‡ªåŠ¨é…ç½®å¥½ï¼Œæ˜¯ä¸æ˜¯æ•²æ–¹ä¾¿çš„ï¼ å®‰è£…Yafæ‰©å±•ï¼špecl install yafå®‰è£…redisæ‰©å±•ï¼š pecl install installå®‰è£…debugï¼špecl install xdebug æ‰©å±•å®‰è£…å®Œæˆåè®°å¾—é‡å¯php-fpm 1brew services restart php@7.1 äº”ã€å®‰è£…redisåŒç†ï¼Œè¿è¡Œ 1brew install redis å…­ã€å‘½ä»¤å¯èƒ½ä¼šç”¨åˆ°çš„ä¸€äº›å‘½ä»¤ï¼š 1. æœç´¢1brew search php 2.å®‰è£…å¸è½½1brew install\\uninstall php@7.1 3.å¯åŠ¨\\é‡å¯\\åœæ­¢æœåŠ¡ï¼š1brew services start\\restart\\stop nginx\\mysql@5.7\\php@7.1 4.æŸ¥çœ‹æŸä¸ªåŒ…çš„ä¿¡æ¯ï¼š1brew info nginx è¯¥å‘½ä»¤ä¼šæ˜¾ç¤ºå®‰è£…è·¯å¾„ã€é…ç½®æ–‡ä»¶ç­‰ä¿¡æ¯","link":"/2019/06/09/mac-homebrew-lnmp/"},{"title":"ä½¿ç”¨OpenSSLè¿›è¡ŒRSAç­¾åå’ŒåŠ å¯†è§£å¯†","text":"PHP7ä¹‹åï¼Œmcryptæ‰©å±•å°±å·²ç»è¢«å¼ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨OpenSSLæ‹“å±•æ¥ä»£æ›¿ã€‚ RSAåŠ å¯†ç®—æ³•æ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œç”¨æ³•æ€»ç»“èµ·æ¥å°±æ˜¯ï¼šå…¬é’¥åŠ å¯†ã€ç§é’¥è§£å¯†ã€ç§é’¥ç­¾åã€å…¬é’¥éªŒç­¾ã€‚ ç­¾åä¸åŠ å¯†çš„ä½œç”¨ï¼š1.ç­¾åæ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®è¢«ç¯¡æ”¹2.åŠ å¯†æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®è¢«æ³„éœ² æ ¼å¼åŒ–å…¬é’¥ç§é’¥1234567891011121314151617181920212223/** * æ ¼å¼åŒ–ç§é’¥ * @param $privateKey * @return string */ private function getPrivateKey($privateKey) { $key = chunk_split($privateKey,64,\"\\n\"); $key = \"-----BEGIN PRIVATE KEY-----\\n\" . $key . \"-----END PRIVATE KEY-----\\n\"; return $key; } /** * æ ¼å¼åŒ–å…¬é’¥ * @param $privateKey * @return string */ private function getPublicKey($publicKey){ $key = chunk_split($publicKey,64,\"\\n\"); $key = \"-----BEGIN PUBLIC KEY-----\\n\" . $key . \"-----END PUBLIC KEY-----\\n\"; return $key; } ä½¿ç”¨ç§é’¥ç­¾å12345678910111213/** * ç­¾å * @param $params * @param $privateKey * @return string */private function sign($data, $privateKey){ $signature = ''; openssl_sign($str, $signature, $privateKey, OPENSSL_ALGO_SHA1); return base64_encode($signature);} ä½¿ç”¨å…¬é’¥éªŒç­¾1234567891011121314151617/** * éªŒç­¾ * @param $return * @param $sign * @param $publicKey * @return bool */public function verify($params, $sign, $publicKey){ $verify = openssl_verify($params, base64_decode($sign), $publicKey); if ($verify != 1) { return false; } return true;} ä½¿ç”¨å…¬é’¥åŠ å¯†1234567891011121314/** * rsa å…¬é’¥åŠ å¯† * @param $data string å¾…åŠ å¯†çš„æ•°æ® * @param string $public_key å…¬é’¥ * @return string */public function rsaPublicEncrypt($data, $publicKey){ $key = openssl_pkey_get_public($publicKey); $encrypted = ''; openssl_public_encrypt($data, $encrypted, $key); return base64_encode($encrypted);} ä½¿ç”¨ç§é’¥è§£å¯†1234567891011/** * ç§é’¥è§£å¯† * @param $encrypted è¢«åŠ å¯†çš„æ•°æ® * @param $private_key ç§é’¥ * @return string */public function rsaPrivateDecrypt($encrypted, $private_key){ openssl_private_decrypt(base64_decode($encrypted),$decrypted,$private_key); return $decrypted;}","link":"/2019/07/09/open-ssl-rsa-sign-encrypt/"},{"title":"ä½¿ç”¨Redisé”æ¥å¤„ç†å¹¶å‘","text":"Redis é—®é¢˜ï¼š æœ€è¿‘åœ¨å’Œç¬¬ä¸‰æ–¹å¯¹æ¥æ”¯ä»˜ï¼Œä»Šå¤©çœ‹æ—¥å¿—å‘ç°ä»–ä»¬çš„å›è°ƒç«Ÿç„¶å¹¶å‘äº†ï¼Œæœ‰ç‚¹æ–¹ã€‚è™½ç„¶æ¯æ¬¡å›è°ƒçš„æ—¶å€™ï¼Œéƒ½ä¼šæŸ¥æ•°æ®åº“æ£€æŸ¥è¿™ä¸ªè®¢å•çš„çŠ¶æ€ï¼Œç„¶åå¯¹è¿›è¡Œç›¸åº”å¤„ç†ã€‚ä½†åŒä¸€ä¸ªè®¢å•å¦‚æœé‡åˆ°å¹¶å‘ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚è¿˜æ²¡å†™å…¥æ•°æ®åº“ï¼Œç¬¬äºŒä¸ªè¯·æ±‚å°±æ¥äº†ï¼Œè¿™ç§æƒ…å†µå°±ä¼šå¯¼è‡´é”™è¯¯ã€‚ è§£å†³åŠæ³•ï¼š ä½¿ç”¨Redisé”ï¼Œæ¯ä¸ªè¯·æ±‚åˆ°è¾¾æ—¶å…ˆåŠ é”ï¼Œå¦‚æœåŠ é”æˆåŠŸæ‰ä¼šæ‰§è¡Œåé¢çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ‰§è¡Œç»“æŸåé‡Šæ”¾é”ã€‚ æ¯”å¦‚ï¼šåŒä¸€ä¸ªè®¢å•å¹¶å‘çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¢å•å·ä½œä¸ºRedisçš„é”®åï¼Œæ¯æ¬¡è¯·æ±‚å‰éƒ½ä¼šå…ˆåŠ é”ï¼Œå¦‚æœåŠ é”å¤±è´¥ï¼Œè¯´æ˜è¯¥è®¢å•æ­£åœ¨è¿›è¡Œå¤„ç†ï¼Œå¹¶æŠŠè¿™ä¸ªè¯·æ±‚æŒ¡å›å»ï¼›å¦‚æœåŠ é”æˆåŠŸï¼Œåˆ™æ‰§è¡Œåé¢çš„ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶åœ¨å®Œæˆåè§£é”ã€‚ æˆ‘æƒ³åˆ°çš„æ˜¯ä½¿ç”¨Redisçš„setå‘½ä»¤ï¼Œ2.6.12ä¹‹åç‰ˆæœ¬ï¼ŒRedis setæŒ‡ä»¤æ”¯æŒäº†nxã€exæ¨¡å¼ï¼Œå¹¶æ”¯æŒåŸå­åŒ–åœ°è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ NX ï¼šåªåœ¨é”®ä¸å­˜åœ¨æ—¶ï¼Œæ‰å¯¹é”®è¿›è¡Œè®¾ç½®æ“ä½œã€‚ SET key value NX æ•ˆæœç­‰åŒäº SETNX key value ã€‚ PHPå®ç° åŠ é”12345678910111213141516171819/** * åŠ é” * @param string $orderId è®¢å•ID * @return bool|int åŠ é”æˆåŠŸè¿”å›å”¯ä¸€é”IDï¼ŒåŠ é”å¤±è´¥è¿”å›false */public static function addLock($orderId){ if(!$orderId){ return false; } $key = self::REDIS_LOCK_NAME . $orderId; $client = BaseRedis::getClient(); //ç”Ÿæˆé”ID è‡ªè¡Œå®ç° $lockId = uniqid(); //éœ€è¦è®¾ç½®ä¸€ä¸ªåˆ°æœŸæ—¶é—´ï¼Œé¿å…æ­»é” $res = $client-&gt;set($key, $lockId, ['nx', 'ex' =&gt; self::REDIS_LOCK_EXPIRE_TIME]); return $res ? $lockId : $res;} 2.è§£é” è§£é”æ—¶ç”¨lockIdè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸ç­‰åˆ™åˆ é™¤é”ã€‚ watch: ç›‘è§†ä¸€ä¸ª(æˆ–å¤šä¸ª) key ï¼Œå¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œä¹‹å‰è¿™ä¸ª(æˆ–è¿™äº›) key è¢«å…¶ä»–å‘½ä»¤æ‰€æ”¹åŠ¨ï¼Œé‚£ä¹ˆäº‹åŠ¡å°†è¢«æ‰“æ–­ã€‚ 1234567891011121314151617181920212223/** * è§£é” * @param string $orderId è®¢å•ID * @param string $lockId é”å”¯ä¸€ID * @return bool */public static function unLock($orderId, $lockId){ if(!$orderId){ return false; } $key = self::REDIS_LOCK_NAME . $orderId; $client = BaseRedis::getClient(); $client-&gt;watch($key); if ($lockId == $client-&gt;get($key)) { // ä»¥ MULTI å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åå°†å¤šä¸ªå‘½ä»¤å…¥é˜Ÿåˆ°äº‹åŠ¡ä¸­ï¼Œ æœ€åç”± EXEC å‘½ä»¤è§¦å‘äº‹åŠ¡ï¼Œä¸€å¹¶æ‰§è¡Œäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤ $client-&gt;multi()-&gt;del($key)-&gt;exec(); return true; } $client-&gt;unwatch(); return false;} ç›®å‰å¯¹åˆ†å¸ƒå¼ç¼“å­˜è¿˜ä¸å¤ªäº†è§£ï¼Œåç»­å­¦ä¹ ã€‚","link":"/2019/07/10/redis-lock/"},{"title":"Safariã€é˜»æ­¢è·¨ç½‘ç«™è¿½è¸ªã€‘é‡åˆ°çš„é—®é¢˜","text":"Safari Cookie éœ€æ±‚æè¿°ç°æœ‰ABä¸¤ä¸ªåŸŸåï¼Œåˆ†åˆ«ä½¿ç”¨åœ¨ABç½‘ç«™ä¸Šã€‚ Aå‘Bå‘é€ä¸€ä¸ªjsonpè·¨åŸŸè¯·æ±‚ï¼Œè¿›è¡Œç”¨æˆ·ç™»å½•æ“ä½œ Bæ”¶åˆ°è¯·æ±‚å¹¶éªŒè¯é€šè¿‡åä¼šåœ¨è‡ªå·±çš„åŸŸåä¸‹å†™ä¸€ä¸ªåŒ…å«å½“å‰ç”¨æˆ·ä¿¡æ¯çš„cookie å½“Aç½‘ç«™å†æ¬¡å‘Bç½‘ç«™å‘èµ·è·å–ç”¨æˆ·ä¿¡æ¯çš„è¯·æ±‚æ—¶ï¼ŒBç½‘ç«™ä¼šè¯»å–è‡ªå·±åŸŸåä¸‹çš„è¿™ä¸ªcookieæ¥è·å–å½“å‰ç”¨æˆ·çš„ä¿¡æ¯å¹¶è¿”å›ç»™A é‡åˆ°çš„é—®é¢˜åœ¨Windows PCä¸Šæµ‹è¯•æ—¶ä¸€åˆ‡æ­£å¸¸ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚å½“ä½¿ç”¨Safariæµè§ˆå™¨è®¿é—®Aç½‘ç«™æ—¶ï¼Œç”¨æˆ·ç™»å½•æ“ä½œæ­£å¸¸ï¼Œä½†åœ¨ç™»å½•æˆåŠŸåï¼Œå‘Bç½‘ç«™å‘èµ·è·å–ç”¨æˆ·ä¿¡æ¯çš„è¯·æ±‚æ—¶ï¼Œæ€»æ˜¯æç¤ºè·å–ä¸åˆ°ã€‚ åœ¨ä¸€ç•ªæŸ¥æ‰¾èµ„æ–™åå‘ç°ï¼ŒiOSç³»ç»Ÿä¸Šçš„Safariè®¾ç½®ä¸­é»˜è®¤å¼€å¯äº† é˜»æ­¢è·¨ç½‘ç«™è¿½è¸ª çš„åŠŸèƒ½ï¼Œä»è€Œå¯¼è‡´Aç½‘ç«™å‘Bç½‘ç«™å‘è¯·æ±‚ï¼ŒBç½‘ç«™å†™cookieåœ¨BåŸŸåä¸‹çš„æ“ä½œä¹Ÿæ— æ³•å®Œæˆâ€¦ **è¿™ä¸ªé—®é¢˜ä¼šå‡ºç°åœ¨æ‰€æœ‰ä½¿ç”¨AppleWebkitå†…æ ¸çš„æµè§ˆå™¨ä¸­ã€‚ ç”±äºiOSç³»ç»Ÿé™åˆ¶ï¼Œè‹¹æœåªå…è®¸ç¬¬ä¸‰æ–¹æµè§ˆå™¨ä½¿ç”¨AppleWebkitå†…æ ¸ï¼Œæ‰€ä»¥æŒ‰ç†iOSä¸Šçš„æ‰€æœ‰æµè§ˆå™¨éƒ½ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚ è§£å†³åŠæ³•ä¸¥æ ¼æ¥è¯´ä¹Ÿä¸ç®—è§£å†³åŠæ³•ï¼Œç®—æ›²çº¿æ•‘å›½å§â€¦ å½“Aå‘Bå‘èµ·ç™»å½•è¯·æ±‚å¹¶æ”¶åˆ°è¿”å›çš„æ•°æ®åï¼ŒAç½‘ç«™å‰ç«¯å°†Bè¿”å›çš„æ•°æ®å­˜åœ¨Açš„cookieä¸­ï¼Œå¹¶åœ¨ä»¥åæ¯æ¬¡è¯·æ±‚Bæ—¶å°†cookieä¸­çš„ä¿¡æ¯ä»¥å‚æ•°å½¢å¼å‘é€ç»™Bã€‚","link":"/2019/01/06/safari-cookie/"},{"title":"è®°ä¸€æ¬¡ä½¿ç”¨PHPå°†wordè½¬ä¸ºexcelçš„ç»å†","text":"æ˜¨å¤©ä¸€ä½æœ‹å‹æ‰¾åˆ°æˆ‘ï¼Œè¯´ä»–æ‰‹ä¸Šæœ‰å‡ åƒä¸ªwordè¡¨æ ¼éœ€è¦è½¬æ¢åˆ°ä¸€ä¸ªexcelæ–‡ä»¶é‡Œï¼Œä»–åœ¨ç½‘ä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°æ»¡è¶³éœ€æ±‚çš„è½¯ä»¶ï¼Œäºæ˜¯è®©æˆ‘å¸®å¿™ç”¨ç¨‹åºå®ç°ã€‚ éœ€æ±‚éœ€æ±‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæ¯ä¸ªæ–‡æ¡£æ–‡æ¡£ä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ ¼å¼å›ºå®šçš„è¡¨æ ¼ï¼Œéœ€è¦æŠŠæ¯ä¸€ä¸ªwordè¡¨æ ¼è½¬æ¢ä¸ºexcelæ–‡ä»¶é‡Œçš„ä¸€è¡Œã€‚ from: to: å¯»æ‰¾è§£å†³æ–¹æ¡ˆæˆ‘é¦–å…ˆæƒ³åˆ°çš„æ˜¯ç”¨PHPè¯»å–wordæ–‡æ¡£ï¼Œå¤„ç†ä¹‹åè½¬æˆexcelã€‚ è½¬æˆexcelæ¯”è¾ƒç®€å•ï¼Œä½¿ç”¨PHPç³»ç»Ÿå‡½æ•°fputcsvå°±å¯ä»¥æå®šï¼Œç°åœ¨éœ€è¦åšçš„æ˜¯è¯»å–åˆ°wordæ–‡æ¡£é‡Œçš„å†…å®¹ã€‚ ç´§æ¥ç€æˆ‘ä¾¿å»ç½‘ä¸ŠæŸ¥æ‰¾ï¼Œçœ‹æœ‰æ²¡æœ‰PHPçš„æ‰©å±•èƒ½å¤Ÿè¯»å–wordæ–‡æ¡£ã€‚åœ¨Githubæœç´¢åˆ°ä¸€ä¸ªå«åš PHPWord çš„æ‰©å±•ï¼Œä¸è¿‡é—æ†¾çš„æ˜¯ï¼Œè¿™ä¸ªæ‰©å±•åªèƒ½å¾€wordæ–‡æ¡£é‡Œå†™å…¥å†…å®¹ï¼Œå¹¶ä¸èƒ½è¯»å–ã€‚ æˆ‘åˆæƒ³ï¼Œèƒ½ä¸èƒ½æŠŠwordè½¬æˆå…¶ä»–æ ¼å¼å†è¯»å–ã€‚äºæ˜¯æˆ‘å°†wordæ–‡æ¡£çš„åç¼€æ”¹æˆäº†txt,æ‰“å¼€æ–‡ä»¶åå†…å®¹å¦‚ä¸‹å›¾ã€‚ å¯†å¯†éº»éº»çš„ä¸€å¤§å †ï¼Œåæ­£æˆ‘æ˜¯æ²¡èƒ½ä»ä¸­æ‰¾åˆ°ä»€ä¹ˆè§„å¾‹ï¼Œäºæ˜¯æ”¾å¼ƒäº†è¿™ç§æ–¹æ³•ã€‚ æ¥ç€æˆ‘åœ¨wordçš„å¦å­˜ä¸ºåŠŸèƒ½ä¸­ï¼Œå‘ç°å¯ä»¥å¦å­˜ä¸ºå…¶ä»–æ ¼å¼ã€‚ äºæ˜¯é€‰æ‹©ä¿å­˜ä¸ºhtmæ–‡ä»¶ï¼Œéšååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è½¬æ¢å¥½çš„æ–‡ä»¶ï¼Œå‘ç°è¡¨æ ¼è½¬æ¢æˆäº†htmlä¸­çš„tableè¡¨æ ¼ï¼Œéå¸¸æ ‡å‡†ã€‚ è¿™æ ·æˆ‘åªéœ€è¦éå†è¯»å–htmæ–‡ä»¶ï¼Œè·å–å…¶ä¸­çš„å†…å®¹ï¼Œå†è¿›è¡Œç›¸åº”å¤„ç†ä¾¿èƒ½å¾—åˆ°æœ€ç»ˆæ•°æ®ã€‚ è¿›è¡Œå¤„ç†å‡†å¤‡ é¦–å…ˆæˆ‘åœ¨ç½‘ä¸Šä¸‹è½½äº†è½¯ä»¶ï¼Œå°†wordæ–‡æ¡£æ‰¹é‡è½¬æ¢ä¸ºhtmæ–‡ä»¶ï¼Œå¹¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ è¯»å–æ–‡ä»¶å†…å®¹æˆ‘ä»¬äº‹å…ˆå°†æ‰€æœ‰è½¬æ¢å¥½çš„æ–‡ä»¶æ”¾åœ¨äº†åŒä¸€ç›®å½•ä¸‹ï¼Œæ‰€ä»¥åªéœ€è¦éå†è¯¥ç›®å½•ï¼Œå¹¶ä½¿ç”¨file_get_contents()å‡½æ•°å°±èƒ½è·å–åˆ°æ¯ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚ æå–æœ‰ç”¨å†…å®¹æŸ¥çœ‹htmæºä»£ç èƒ½å‘ç°ï¼Œæ¯ä¸ªwordè¡¨æ ¼è½¬æ¢åå˜æˆäº†ä¸€ä¸ªhtmlè¡¨æ ¼ï¼Œåªéœ€è¦å…ˆå–åˆ°&lt;table&gt;&lt;/table&gt;æ ‡ç­¾é‡Œçš„å†…å®¹ï¼Œç„¶åå†æŒ‰è¡Œåˆ†å‰²ï¼ŒæŒ‰åˆ—åˆ†å‰²ï¼Œä¾¿èƒ½å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•°æ®äº†ã€‚ é™„ä¸Šç®€ç•¥ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071//ç”Ÿæˆcsvæ–‡ä»¶function writeExcel(){ //å†™å…¥æ–‡æ¡£å¤´éƒ¨ $fileName = './data.csv'; file_put_contents($fileName,''); $handle = fopen($fileName, 'w'); fwrite($handle, chr(0xEF).chr(0xBB).chr(0xBF)); // å†™å…¥BOMå¤´ï¼Œé˜²æ­¢ä¹±ç  $titleArr = ['A' =&gt; 'æ ·å“ç±»å‹', 'B' =&gt; 'å›¾å¹…ç¼–å·'];//æ¬¡æ•°çœç•¥ fputcsv($handle, $titleArr); return $handle;}//è¯»å–æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶function scanFile($path){ $result = []; $files = scandir($path); foreach ($files as $file) { if ($file != '.' &amp;&amp; $file != '..') { $result[] = basename($file); } } return $result;}//æå–è¡¨æ ¼å†…å®¹function getContents(){ $filesArr = scanFile('./'); $handle = writeExcelHeader(); foreach ($filesName as $k =&gt; $v){ //è¯»å–æ–‡ä»¶å†…å®¹ $text = file_get_contents($path . $v); //è½¬æ¢ç¼–ç  $text = iconv(\"gb2312\", \"utf-8//IGNORE\",$text); //å»é™¤htmlæ ‡ç­¾å¤šä½™å±æ€§ $text = preg_replace(\"/&lt;([a-zA-Z]+)[^&gt;]*&gt;/\",\"&lt;\\\\1&gt;\",$text); //æå–è¡¨æ ¼å†…å®¹ preg_match_all(\"/&lt;table&gt;(.*?)&lt;\\/table&gt;/is\",$text,$matches); //å¤„ç†è¡¨æ ¼å†…å®¹ foreach ($matches[1] as $match){ html2excel($match, $handle); }}//å¤„ç†è¡¨æ ¼å†…å®¹function convert($content){ $res = []; //æŒ‰è¡Œæ‹†åˆ† $trArr = explode('&lt;tr&gt;', $content); foreach ($trArr as $k =&gt; $tr){ //å»é™¤å¤šä½™æ ‡ç­¾ $tr = str_replace('&lt;/tr&gt;','', $tr); //æŒ‰åˆ—æ‹†åˆ† $tdArr = explode('&lt;td&gt;', $tr); foreach ($tdArr as $kk =&gt; $td){ //å»é™¤å¤šä½™æ ‡ç­¾ $td = str_replace('&lt;/td&gt;','', $td); //å»é™¤htmlæ ‡ç­¾ å¾—åˆ°å†…å®¹ $text = strip_tags($td); $res[] = $text; } } fputcsv($handel, $res);}getContents(); æœ€åä½¿ç”¨åˆ°çš„ä¸€äº›å‡½æ•°ï¼š iconv() ç¼–ç è½¬æ¢ preg_replace() ä½¿ç”¨æ­£åˆ™æ›¿æ¢æ–‡æœ¬ preg_match_all() ä½¿ç”¨æ­£åˆ™è·å–å†…å®¹ strip_tags() å»é™¤æ–‡æœ¬ä¸­çš„htmlæ ‡ç­¾ str_replace() æ–‡æœ¬æ›¿æ¢ fputcsv() å°†åˆ¶å®šå†…å®¹å†™å…¥csvæ–‡ä»¶","link":"/2019/01/12/word-to-excel-use-php/"},{"title":"MongoDBä½¿ç”¨","text":"MongoDB ç®€ä»‹ åŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚ç”±C++è¯­è¨€ç¼–å†™ã€‚ ä»‹äºå…³ç³»æ•°æ®åº“å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚å®ƒæ”¯æŒçš„æ•°æ®ç»“æ„éå¸¸æ¾æ•£ï¼Œæ˜¯ç±»ä¼¼jsonçš„bsonæ ¼å¼ï¼Œå› æ­¤å¯ä»¥å­˜å‚¨æ¯”è¾ƒå¤æ‚çš„æ•°æ®ç±»å‹ã€‚Mongoæœ€å¤§çš„ç‰¹ç‚¹æ˜¯å®ƒæ”¯æŒçš„æŸ¥è¯¢è¯­è¨€éå¸¸å¼ºå¤§ï¼Œå…¶è¯­æ³•æœ‰ç‚¹ç±»ä¼¼äºé¢å‘å¯¹è±¡çš„æŸ¥è¯¢è¯­è¨€ï¼Œå‡ ä¹å¯ä»¥å®ç°ç±»ä¼¼å…³ç³»æ•°æ®åº“å•è¡¨æŸ¥è¯¢çš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œè€Œä¸”è¿˜æ”¯æŒå¯¹æ•°æ®å»ºç«‹ç´¢å¼•ã€‚ æ•°æ®å½¢å¼MongoDB å­˜å‚¨çš„æ•°æ®å¯¹è±¡ç”±é”®å€¼å¯¹ç»„æˆã€‚MongoDB æ‰€æœ‰å­˜å‚¨åœ¨é›†åˆä¸­çš„æ•°æ®éƒ½æ˜¯ BSON æ ¼å¼ã€‚BSON æ˜¯ä¸€ç§ç±»ä¼¼ JSON çš„äºŒè¿›åˆ¶å½¢å¼çš„å­˜å‚¨æ ¼å¼ï¼Œæ˜¯ Binary JSON çš„ç®€ç§°ã€‚ å½¢å¼å¦‚ä¸‹ï¼š 1234567891011121314151617{ \"_id\" : ObjectId(\"5c89f787ca6e4e3ac1ecabkk\"), \"update_time\" : ISODate(\"2019-06-03T15:00:42.142Z\"), \"create_time\" : ISODate(\"2019-03-14T14:41:11.217Z\"), \"creator\" : \"test_user\", \"admin\" : [ \"admin1\", \"admin2\" ], \"ops\" : [ \"ops1\" ], \"labels\" : { \"department\" : \"departmentA\", \"main_class\" : \"mainClassA\" }} æ¦‚å¿µè§£æ SQLæœ¯è¯­/æ¦‚å¿µ MongoDBæœ¯è¯­/æ¦‚å¿µ è§£é‡Š/è¯´æ˜ database database æ•°æ®åº“ table collection æ•°æ®åº“è¡¨/é›†åˆ row document æ•°æ®è®°å½•è¡Œ/æ–‡æ¡£ column field æ•°æ®å­—æ®µ/åŸŸ index index ç´¢å¼• primary key primary key ä¸»é”®,MongoDBè‡ªåŠ¨å°†_idå­—æ®µè®¾ç½®ä¸ºä¸»é”® åœ¨MySql ä¸­ id name birthday sex 1 å¼ è±†è±† 19960601 ç”· 2 æ¨èŠ±èŠ± 19950726 å¥³ åœ¨mongoDBzhong ä¸­123456789101112{ \"_id\": ObjectId(\"5c89f787ca6e4e3ac1ehhb23\"), \"name\": \"å¼ è±†è±†\", \"birthday\": \"19960601\", \"sex\": \"ç”·\"},{ \"_id\" : ObjectId(\"5c89f787ca6e4e3ac1ehhb24\"), \"name\": \"æ¨èŠ±èŠ±\", \"birthday\": \"19950726\", \"sex\": \"å¥³\"}, åº”ç”¨åœºæ™¯é€‚ç”¨çš„åœºæ™¯ æ— éœ€è¦è·¨æ–‡æ¡£æˆ–è·¨è¡¨çš„äº‹åŠ¡åŠå¤æ‚çš„joinæŸ¥è¯¢æ”¯æŒ // ç›®å‰å·²ç»æ”¯æŒäº‹åŠ¡ï¼Œjoinçš„æ”¯æŒä¹Ÿè¶Šæ¥è¶Šå¥½ã€‚ æ•æ·è¿­ä»£çš„ä¸šåŠ¡ï¼Œéœ€æ±‚å˜åŠ¨é¢‘ç¹ï¼Œæ•°æ®æ¨¡å‹æ— æ³•ç¡®å®š å­˜å‚¨çš„æ•°æ®æ ¼å¼çµæ´»ï¼Œä¸å›ºå®šï¼Œæˆ–å±äºåŠç»“æ„åŒ–æ•°æ® ä¸šåŠ¡å¹¶å‘è®¿é—®é‡å¤§ï¼Œéœ€æ•°åƒçš„QPS(æ¯ç§’æŸ¥è¯¢ç‡) TBçº§ä»¥ä¸Šçš„æµ·é‡æ•°æ®å­˜å‚¨ï¼Œä¸”æ•°æ®é‡ä¸æ–­å¢åŠ  è¦æ±‚å­˜å‚¨çš„æ•°æ®æŒä¹…åŒ–ã€ä¸ä¸¢å¤± éœ€è¦99.999%çš„æ•°æ®é«˜å¯ç”¨æ€§ åœºæ™¯ä¸¾ä¾‹ï¼š æ¸¸æˆåœºæ™¯ï¼šä½¿ç”¨ MongoDB å­˜å‚¨æ¸¸æˆç”¨æˆ·ä¿¡æ¯ï¼Œç”¨æˆ·çš„è£…å¤‡ã€ç§¯åˆ†ç­‰ç›´æ¥ä»¥å†…åµŒæ–‡æ¡£çš„å½¢å¼å­˜å‚¨ï¼Œæ–¹ä¾¿æŸ¥è¯¢ã€æ›´æ–° ç‰©æµåœºæ™¯ï¼šä½¿ç”¨ MongoDB å­˜å‚¨è®¢å•ä¿¡æ¯ï¼Œè®¢å•çŠ¶æ€åœ¨è¿é€è¿‡ç¨‹ä¸­ä¼šä¸æ–­æ›´æ–°ï¼Œä»¥ MongoDB å†…åµŒæ•°ç»„çš„å½¢å¼æ¥å­˜å‚¨ï¼Œä¸€æ¬¡æŸ¥è¯¢å°±èƒ½å°†è®¢å•æ‰€æœ‰çš„å˜æ›´è¯»å–å‡ºæ¥ã€‚ ç¤¾äº¤åœºæ™¯ï¼šä½¿ç”¨ MongoDB å­˜å‚¨å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œä»¥åŠç”¨æˆ·å‘è¡¨çš„æœ‹å‹åœˆä¿¡æ¯ï¼Œé€šè¿‡åœ°ç†ä½ç½®ç´¢å¼•å®ç°é™„è¿‘çš„äººã€åœ°ç‚¹ç­‰åŠŸèƒ½ ç‰©è”ç½‘åœºæ™¯ï¼šä½¿ç”¨ MongoDB å­˜å‚¨æ‰€æœ‰æ¥å…¥çš„æ™ºèƒ½è®¾å¤‡ä¿¡æ¯ï¼Œä»¥åŠè®¾å¤‡æ±‡æŠ¥çš„æ—¥å¿—ä¿¡æ¯ï¼Œå¹¶å¯¹è¿™äº›ä¿¡æ¯è¿›è¡Œå¤šç»´åº¦çš„åˆ†æ è§†é¢‘ç›´æ’­ï¼šä½¿ç”¨ MongoDB å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€ç¤¼ç‰©ä¿¡æ¯ç­‰ â€¦â€¦ æ¡ˆä¾‹1 ç”¨åœ¨åº”ç”¨æœåŠ¡å™¨çš„æ—¥å¿—è®°å½•ï¼ŒæŸ¥æ‰¾èµ·æ¥æ¯”æ–‡æœ¬çµæ´»ï¼Œå¯¼å‡ºä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ä¹Ÿæ˜¯ç»™åº”ç”¨ç»ƒæ‰‹ï¼Œä»å¤–å›´ç³»ç»Ÿå¼€å§‹ä½¿ç”¨MongoDBã€‚ç”¨åœ¨ä¸€äº›ç¬¬ä¸‰æ–¹ä¿¡æ¯çš„è·å–æˆ–è€…æŠ“å–ï¼Œå› ä¸ºMongoDBçš„schema-lessï¼Œæ‰€æœ‰æ ¼å¼çµæ´»ï¼Œä¸ç”¨ä¸ºäº†å„ç§æ ¼å¼ä¸ä¸€æ ·çš„ä¿¡æ¯ä¸“é—¨è®¾è®¡ç»Ÿä¸€çš„æ ¼å¼ï¼Œæå¤§çš„å‡å°‘å¼€å‘çš„å·¥ä½œã€‚ æ¡ˆä¾‹2 mongodbä¹‹å‰æœ‰ç”¨è¿‡ï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨ä¸€äº›ç›‘æ§æ•°æ®ï¼ŒNo schema å¯¹å¼€å‘äººå‘˜æ¥è¯´ï¼ŒçœŸçš„å¾ˆæ–¹ä¾¿ï¼Œå¢åŠ å­—æ®µä¸ç”¨æ”¹è¡¨ç»“æ„ï¼Œè€Œä¸”å­¦ä¹ æˆæœ¬æä½ã€‚ æ¡ˆä¾‹3 ä½¿ç”¨MongoDBåšäº†O2Oå¿«é€’åº”ç”¨ï¼ŒÂ·å°†é€å¿«é€’éª‘æ‰‹ã€å¿«é€’å•†å®¶çš„ä¿¡æ¯ï¼ˆåŒ…å«ä½ç½®ä¿¡æ¯ï¼‰å­˜å‚¨åœ¨ MongoDBï¼Œç„¶åé€šè¿‡ MongoDB çš„åœ°ç†ä½ç½®æŸ¥è¯¢ï¼Œè¿™æ ·å¾ˆæ–¹ä¾¿çš„å®ç°äº†æŸ¥æ‰¾é™„è¿‘çš„å•†å®¶ã€éª‘æ‰‹ç­‰åŠŸèƒ½ï¼Œä½¿å¾—å¿«é€’éª‘æ‰‹èƒ½å°±è¿‘æ¥å•ï¼Œç›®å‰åœ¨ä½¿ç”¨MongoDB ä¸Šæ²¡é‡åˆ°å•¥å¤§çš„é—®é¢˜ï¼Œå®˜ç½‘çš„æ–‡æ¡£æ¯”è¾ƒè¯¦ç»†ï¼Œå¾ˆç»™åŠ›ã€‚ ä¸é€‚ç”¨çš„åœºæ™¯ï¼š è¦æ±‚é«˜åº¦äº‹åŠ¡æ€§çš„ç³»ç»Ÿã€‚ å¤æ‚çš„è·¨è¡¨çº§è”æŸ¥è¯¢ã€‚ å®‰è£…Homebrewå®‰è£…1brew tap mongodb/brew 1brew install mongodb-community@4.2 ç¯å¢ƒå˜é‡ï¼šæ‰“å¼€ .bash_profile 1open -e .bash_profile æ·»åŠ ä¸€è¡Œ 1export PATH=/usr/local/Cellar/mongodb-community/4.2.1/bin:${PATH}} ç„¶å 1source .bash_profile å¼€æœºè‡ªå¯ï¼š 1ln -sfv /usr/local/Cellar/mongodb-community/4.2.1/*.plist ~/Library/LaunchAgents æ‰‹åŠ¨å®‰è£… ä¸‹è½½ ä¸‹è½½åœ°å€ï¼š https://www.mongodb.com/download-center/community?jmp=nav é€‰æ‹©ç‰ˆæœ¬åŠå¯¹åº”çš„æ“ä½œç³»ç»Ÿåè¿›è¡Œä¸‹è½½ å°†ä¸‹è½½å®Œæˆçš„æ–‡ä»¶è§£å‹å¹¶é‡å‘½åä¸ºmongodb å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ° /usr/local ç›®å½•ä¸‹ é…ç½®ç¯å¢ƒå˜é‡åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ 12345open -e .bash_profile``` åœ¨æ‰“å¼€çš„æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œ``` bashexport PATH=${PATH}:/usr/local/mongodb/bin åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ 1source .bash_profile åˆ›å»ºmongodbæ•°æ®å­˜å‚¨ç›®å½•1mkdir -p /data/db å¯åŠ¨å¯åŠ¨æœåŠ¡ 1mongod ç„¶åæ‰“å¼€å¦ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼Œè¾“å…¥ 1mongo è¿™æ ·å°±å¯ä»¥æ“ä½œmongodbäº†ã€‚ ä¸PHPä¸€èµ·ä½¿ç”¨ åœ¨PHPä¸­ä½¿ç”¨MongoDBï¼Œéœ€è¦å®‰è£…PHP-MongoDBé©±åŠ¨æˆ‘ä½¿ç”¨peclå®‰è£… 1pecl install mongodb 1. ç›´æ¥ä½¿ç”¨12345678910111213141516171819202122$manager = new MongoDB\\Driver\\Manager(\"mongodb://localhost:27017\"); // æ’å…¥æ•°æ®$bulk = new MongoDB\\Driver\\BulkWrite;$bulk-&gt;insert(['x' =&gt; 1, 'name'=&gt;'baidu', 'url' =&gt; 'http://www.baidu.com']);$bulk-&gt;insert(['x' =&gt; 2, 'name'=&gt;'Google', 'url' =&gt; 'http://www.google.com']);$bulk-&gt;insert(['x' =&gt; 3, 'name'=&gt;'taobao', 'url' =&gt; 'http://www.taobao.com']);$manager-&gt;executeBulkWrite('test.sites', $bulk);$filter = ['x' =&gt; ['$gt' =&gt; 1]];$options = [ 'projection' =&gt; ['_id' =&gt; 0], 'sort' =&gt; ['x' =&gt; -1],];// æŸ¥è¯¢æ•°æ®$query = new MongoDB\\Driver\\Query($filter, $options);$cursor = $manager-&gt;executeQuery('test.sites', $query);foreach ($cursor as $document) { print_r($document);} 2. ä½¿ç”¨å®˜æ–¹æ‰©å±•åŒ…å®‰è£…1composer require mongodb/mongodb ä½¿ç”¨12345678910//è¿æ¥$client = new MongoDB\\Client('mongodb://localhost:27017');//é€‰æ‹©æ•°æ®åº“$db = $client-&gt;selectDatabase(\"db\");//é€‰æ‹©æ–‡æ¡£$collection = $db-&gt;selectCollection(\"collection\");//æŸ¥è¯¢$result = $collection-&gt;findOne(['name' =&gt; 'panda']);//... 3. åœ¨Yiiä¸­ä½¿ç”¨ æˆ‘å¹³æ—¶ç”¨Yiiæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹åœ¨Yiiä¸­çš„ä½¿ç”¨æ–¹æ³•ã€‚ å®‰è£…1composer require yiisoft/yii2-mongodb é…ç½®åœ¨é…ç½®æ–‡ä»¶çš„ components ä¸­åŠ å…¥ 12345678'mongodb' =&gt; [ 'class' =&gt; '\\yii\\mongodb\\Connection', 'dsn' =&gt; 'mongodb://localhost:27017/dbName', 'options' =&gt; [ \"username\" =&gt; \"Username\", \"password\" =&gt; \"Password\" ]]; ä½¿ç”¨ ç»„ä»¶ä½¿ç”¨ 12345$collection = Yii::$app-&gt;mongodb-&gt;getCollection ( 'user' );$res = $collection-&gt;insert ( [ 'name' =&gt; 'Panda', 'ag3' =&gt; 18] ); modelä¸­ä½¿ç”¨ä¸MySQLç±»ä¼¼ï¼Œåˆ›å»ºä¸€ä¸ªmodelæ–‡ä»¶ï¼Œç»§æ‰¿ yii\\mongodb\\ActiveRecord 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677&lt;?phpnamespace frontend\\models;use Yii;use yii\\db\\ActiveRecord;/** * This is the model class for table \"vote_log\". * * @property int $id * @property int $user_id * @property int $post_id * @property string $post_type * @property int $created_at * @property int $updated_at * @property int $if_deleted */class VoteLog extends yii\\mongodb\\ActiveRecord{ /** * å®šä¹‰é›†åˆåç§° æ³¨æ„æ˜¯ collectionNameï¼Œä¸æ˜¯ tableName * {@inheritdoc} */ public static function collectionName() { return 'vote_log'; } /** * å®šä¹‰è§„åˆ™ * {@inheritdoc} */ public function rules() { return [ [['user_id', 'post_id'], 'required'], [['user_id', 'post_id', 'created_at', 'updated_at', 'if_deleted'], 'integer'], [['user_id', 'post_id',], 'integer'], [['post_type'], 'string', 'max' =&gt; 20], ]; } /** * å®šä¹‰å­—æ®µ æ³¨æ„æ˜¯ attributesï¼Œä¸æ˜¯ attributeLabels * {@inheritdoc} */ public function attributes() { return [ '_id', //_idä¸€å®šè¦æœ‰ 'id', 'user_id', 'post_id', 'post_type', 'created_at', 'updated_at', 'if_deleted', ]; } /** * æŸ¥æ‰¾ç‚¹èµè®°å½• * @param $postId * @param $userId * @param int $ifDeleted */ public static function findVoteLog($postId, $userId) { $voted = self::findOne(['post_id' =&gt; $postId, 'user_id' =&gt; $userId]); return $voted; }}","link":"/2019/12/06/mongodb-learning/"},{"title":"Shellè„šæœ¬å­¦ä¹ ç¬”è®°","text":"è¿™æ˜¯ç”¨æ¥è®°å½•å­¦ä¹ shellçš„æ–‡ç« ã€‚ æœ¬æ–‡æ‰€å†™å†…å®¹ä¸»è¦æ˜¯æ ¹æ®ç½‘ç»œæ•™ç¨‹å’Œè‡ªæˆ‘ç†è§£æ‰€å¾—ï¼Œå¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œè¯·æŒ‡å‡ºã€‚ è§£é‡Šå™¨ä¸€èˆ¬shellè„šæœ¬çš„ç¬¬ä¸€è¡Œéƒ½æ˜¯ä»¥ #!/bin/sh å¼€å¤´ï¼Œ#! æ ‡è¯†ç”¨ä»€ä¹ˆè§£é‡Šå™¨æ¥æ‰§è¡Œæ­¤è„šæœ¬ã€‚ è§£é‡Šå™¨çš„ç§ç±»å¾ˆå¤šï¼Œæ¯”è¾ƒå¸¸è§çš„å°±æ˜¯ï¼š /bin/sh /bin/bash æ³¨é‡Šåœ¨ä¸€è¡Œå¼€å¤´ä½¿ç”¨# 12# author: ä½ çš„å°å¯çˆ±# date: 2019-07-14 shellä¸­æ²¡æœ‰å¤šè¡Œæ³¨é‡Š å˜é‡å‘½åè§„åˆ™ åªèƒ½ä½¿ç”¨å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼Œä¸èƒ½ä»¥æ•°å­—å¼€å¤´ ä¸èƒ½ä½¿ç”¨ç‰¹æ®Šç¬¦å· ä¸èƒ½ä½¿ç”¨å…³é”®å­— å˜é‡åç¤ºä¾‹ï¼š 12345idUSERNAMEfavoritefavorite2_sex ä½¿ç”¨å˜é‡å®šä¹‰å˜é‡1name=\"ä½ çš„å°å¯çˆ±\" æ³¨æ„ç‚¹ï¼š å®šä¹‰å˜é‡æ—¶ï¼Œå˜é‡åä¸éœ€è¦ä½¿ç”¨$ç¬¦å· ç­‰å·å‰åä¸èƒ½æœ‰ç©ºæ ¼ ä½¿ç”¨å˜é‡123456echo $nameecho ${name}echo \"æˆ‘çš„åå­—æ˜¯ï¼š${name}\"name=\"å¤§å®¶çš„å°å¯çˆ±\"echo $name æ³¨æ„ç‚¹ï¼š å®šä¹‰å˜é‡æ—¶å˜é‡åå‰ä¸éœ€è¦åŠ $ï¼Œä½†ä½¿ç”¨æ—¶éœ€è¦åŠ $ã€‚ é‡æ–°å®šä¹‰å˜é‡æ—¶ï¼Œå˜é‡åå‰ä¸éœ€è¦åŠ $,åªåœ¨ä½¿ç”¨å˜é‡æ—¶æ‰åŠ ã€‚ å­—ç¬¦ä¸²å•åŒå¼•å·åœ¨shellä¸­å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨å•å¼•å·ã€åŒå¼•å·ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ã€‚ 123str='Hello World.'str2=\"ä½ å¥½ä¸–ç•Œ\"str3=æ³¥è±ªå•Š æ³¨æ„ç‚¹ï¼š å•å¼•å·ä¸­çš„å†…å®¹ä¼šåŸæ ·è¾“å‡ºï¼Œå•å¼•å·ä¸­çš„å˜é‡æ— æ•ˆ å•å¼•å·å­—ä¸²ä¸­ä¸èƒ½å‡ºç°å•ç‹¬ä¸€ä¸ªçš„å•å¼•å·ï¼ˆå¯¹å•å¼•å·ä½¿ç”¨è½¬ä¹‰ç¬¦åä¹Ÿä¸è¡Œï¼‰ åŒå¼•å·ä¸­å¯ä»¥ä½¿ç”¨å˜é‡å’Œè½¬ä¹‰å­—ç¬¦ 123age=18;echo 'my age is ${age}'echo \"my age is ${age} \\nHow old are you?\" è¾“å‡ºï¼š 123my age is ${age}my age is 18How old are you? å­—ç¬¦ä¸²æ“ä½œå­—ç¬¦ä¸²æ‹¼æ¥1234567891011name=\"ä½ çš„å°å¯çˆ±\"echo \"ä½ å¥½ï¼Œæˆ‘æ˜¯${name}\"echo \"ä½ å¥½ï¼Œæˆ‘æ˜¯\"$nameecho \"ä½ å¥½ï¼Œæˆ‘æ˜¯\"$name\"ï¼Œå“ˆå“ˆ\"echo 'ä½ å¥½ï¼Œæˆ‘æ˜¯'$name'ï¼Œå“ˆå“ˆ'# è¾“å‡º# ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„å°å¯çˆ±# ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„å°å¯çˆ±# ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„å°å¯çˆ±ï¼Œå“ˆå“ˆ# ä½ å¥½ï¼Œæˆ‘æ˜¯ä½ çš„å°å¯çˆ±ï¼Œå“ˆå“ˆ å­—ç¬¦ä¸²é•¿åº¦123str=\"hello\";echo ${#str};#è¾“å‡ºï¼š5 å­—ç¬¦ä¸²æˆªå–123456str=\"abcdefg\"echo ${str:1:3} # è¾“å‡º bcdecho ${str:0:4}# è¾“å‡º abcd ç”¨æˆ·è¾“å…¥æ‰§è¡Œè„šæœ¬æ—¶ä¼ å…¥ åœ¨æ‰§è¡Œè„šæœ¬æ—¶å¯å‘è„šæœ¬ä¼ å…¥å‚æ•°ï¼Œå‚æ•°ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ï¼Œåœ¨è„šæœ¬å†…ä½¿ç”¨$næ¥æ¥æ”¶å‚æ•°ï¼Œnä»£è¡¨æ˜¯ç¬¬å‡ ä¸ªå‚æ•°ï¼Œå¦‚$1ä»£è¡¨ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ å¦‚æœå‚æ•°å†…æœ‰ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨å¼•å·å°†å‚æ•°æ‹¬èµ·æ¥ã€‚ 1234echo \"æ‰§è¡Œçš„æ–‡ä»¶åï¼š$0\"echo \"ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š$1\"echo \"ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š$2\"echo \"ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š$3\" 1234âœ ./test.sh 1 &apos;2 22&apos; &quot;3 33&quot;ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š1ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š2 22ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š3 33 è·å–ä¼ å…¥å‚æ•°çš„ä¸ªæ•°ï¼Œä½¿ç”¨$# 12echo \"ä¼ å…¥å‚æ•°ä¸ªæ•°ï¼š\"$#echo \"ä¼ å…¥å‚æ•°ä¸ªæ•°ï¼š${#}\" 123âœ ./test.sh 1 &apos;2 22&apos; &quot;3 33&quot;ä¼ å…¥å‚æ•°ä¸ªæ•°ï¼š3ä¼ å…¥å‚æ•°ä¸ªæ•°ï¼š3 è¿è¡Œè„šæœ¬æ—¶è¾“å…¥ä½¿ç”¨readåœ¨ç¨‹åºè¿è¡Œæ—¶è·å–ç”¨æˆ·è¾“å…¥çš„å‚æ•° 123echo \"Please enter your name:\"read nameecho \"Hello $name\" 1234âœ ./test.shPlease enter your name:ç†Šå°å¸…Hello ç†Šå°å¸… ä½¿ç”¨-pç›´æ¥æŒ‡å®šä¸€ä¸ªæç¤ºè¯­å¥ 12read -p \"Please enter your name:\" nameecho \"Hello $name\" 123âœ ./test.shPlease enter your name:ç†Šå¤§å¸…Hello ç†Šå¤§å¸… ä½¿ç”¨-tè¿›è¡Œå€’è®¡æ—¶ï¼Œç”¨æˆ·éœ€è¦åœ¨æŒ‡å®šæ—¶é—´(ç§’)å†…å®Œæˆè¾“å…¥ 12345678if read -t 5 -p \"Please enter your name in 5 seconds:\" namethen echo \"Hello $name\"else echo echo \"timeout\"fi 123âœ ./test.shPlease enter your name in 5 seconds:timeout ä½¿ç”¨-séšè—è¾“å…¥å†…å®¹ 123read -s -p \"Please enter your password:\" pwdechoecho \"I got it! Your password is: $pwd\" 123âœ ./test.shPlease enter your password:I got it! Your password is: 123456 è¿ç®—ç¬¦shellä¸­çš„è¿ç®—ç¬¦åŒ…æ‹¬ï¼š ç®—æ•°è¿ç®—ç¬¦ å…³ç³»è¿ç®—ç¬¦ å¸ƒå°”è¿ç®—ç¬¦ å­—ç¬¦ä¸²è¿ç®—ç¬¦ æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦ åœ¨Linuxçš„shellä¸­ï¼Œå˜é‡çš„å€¼çš„ç±»å‹é»˜è®¤æ˜¯å­—ç¬¦ä¸²ï¼Œä¸èƒ½ç›´æ¥è¿›è¡Œæ•°å€¼è¿ç®—ã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡å…¶ä»–å‘½ä»¤æ¥å®ç°ï¼Œå¦‚exprã€‚ 12echo `expr 1 + 2`# è¾“å‡ºï¼š3 æ³¨æ„ï¼š è¡¨è¾¾å¼éœ€è¦ç”¨åå¼•å·``æ‹¬èµ·æ¥ è¡¨è¾¾å¼å’Œè¿ç®—ç¬¦ä¹‹é—´è¦ç”¨ç©ºæ ¼éš”å¼€ï¼Œå¦‚1 + 2ä¸èƒ½å†™æˆ1+2ï¼Œ= èµ‹å€¼æ—¶ï¼Œå‰åæ— ç©ºæ ¼ ç®—æ•°è¿ç®—ç¬¦ è¿ç®—ç¬¦ è¯´æ˜ + åŠ  - å‡ * ä¹˜ / é™¤ % å–ä½™ = èµ‹å€¼ == ç›¸ç­‰ != ä¸ç­‰ 1234567891011121314151617#!/bin/basha=1b=2echo `expr $a + $b`echo `expr $a - $b`echo `expr $a \\* $b`echo `expr $b / $a`echo `expr $b % $a`if [ $a == $b ]then echo \"aç­‰äºb\"fiif [ $a != $b ]then echo \"aä¸ç­‰äºb\"fi 1234563-1220aä¸ç­‰äºb æ³¨æ„ï¼š []ä»£è¡¨ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œ[]ä¸­çš„å†…å®¹è¦ä¸ä¸¤ä¾§çš„ç¬¦å·ä½¿ç”¨ç©ºæ ¼éš”å¼€ï¼Œå¦‚[ $a + $b ]ï¼Œä¸èƒ½å†™æˆ[$a+$b] ä¹˜å·*å‰è¾¹å¿…é¡»åŠ åæ–œæ \\ åœ¨MACä¸Šï¼Œexprè¯­æ³•å¯ä»¥å†™æˆ $((è¡¨è¾¾å¼))ï¼Œäº²æµ‹è¡¨è¾¾å¼å’Œè¿ç®—ç¬¦ä¹‹é—´å¯ä»¥ä¸åŠ ç©ºæ ¼ï¼Œ$(($a+$b))å’Œ$(($a + $b))éƒ½å¯ä»¥ï¼›ä¹˜æ³•å†™æˆ$(($a*$b))ï¼Œä¸éœ€è¦åŠ \\ MAC shell 1234567891011121314151617#!/bin/basha=1b=2echo $(($a + $b))echo $(($a-$b))echo $(($a*$b))echo $(($b/$a))echo $(($b%$a))if [ $a == $b ]then echo \"aç­‰äºb\"fiif [ $a != $b ]then echo \"aä¸ç­‰äºb\"fi 1234563-1220aä¸ç­‰äºb å…³ç³»è¿ç®—ç¬¦ è¿ç®—ç¬¦ è¯´æ˜ -eq ç›¸ç­‰ -ne ä¸ç­‰ -gt å¤§äº -lt å°äº -ge å¤§äºç­‰äº -le å°äºç­‰äº 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#!/bin/basha=1b=2if [ $a -eq $b ]then echo \"aç­‰äºb\"else echo \"aä¸ç­‰äºb\"fiif [ $a -ne $b ]then echo \"aä¸ç­‰äºb\"else echo \"aç­‰äºb\"fiif [ $a -gt $b ]then echo \"aå¤§äºb\"else echo \"aä¸å¤§äºb\"fiif [ $a -lt $b ]then echo \"aå°äºb\"else echo \"aä¸å°äºb\"fiif [ $a -ge $b ]then echo \"aå¤§äºç­‰äºb\"else echo \"aå°äºb\"fiif [ $a -le $b ]then echo \"aå°äºç­‰äºb\"else echo \"aå¤§äºb\"fi è¾“å‡º 1234567âœ sh test.shaä¸ç­‰äºbaä¸ç­‰äºbaä¸å¤§äºbaå°äºbaå°äºbaå°äºç­‰äºb å¸ƒå°”è¿ç®—ç¬¦ è¿ç®—ç¬¦ è¯´æ˜ ! é -o æˆ– -a ä¸ 12345678910111213141516171819202122232425#!/bin/basha=1b=20if [ $a != $b ]then echo \"aä¸ç­‰äºb\"else echo \"aç­‰äºb\"fiif [ $a -gt 2 -o $b -gt 10 ]then echo \"aå¤§äº2æˆ–bå¤§äº10\"else echo \"aå°äºç­‰äº2å¹¶ä¸”bå°äºç­‰äº10\"fiif [ $a -gt 2 -a $b -gt 10 ]then echo \"aå¤§äº2å¹¶ä¸”bå¤§äº10\"else echo \"aå°äºç­‰äº2æˆ–è€…bå°äºç­‰äº10\"fi è¾“å‡ºï¼š 1234âœ sh test.shaä¸ç­‰äºbaå¤§äº2æˆ–bå¤§äº10aå°äºç­‰äº2æˆ–è€…bå°äºç­‰äº10 é€»è¾‘è¿ç®—ç¬¦ è¿ç®—ç¬¦ è¯´æ˜ &amp;&amp; é€»è¾‘and || é€»è¾‘or 123456789101112131415161718#!/bin/basha=1b=20if [[ $a -lt 2 &amp;&amp; $b -gt 10 ]]then echo \"aå°äº2å¹¶ä¸”bå¤§äº10\"else echo \"aå¤§äºç­‰äº2æˆ–è€…bå°äºç­‰äº10\"fiif [[ $a -lt 2 || $b -gt 10 ]]then echo \"aå°äº2æˆ–è€…bå¤§äº10\"else echo \"aå¤§äºç­‰äº2å¹¶ä¸”bå°äºç­‰äº10\"fi è¾“å‡ºï¼š 123âœ sh test.shaå°äº2å¹¶ä¸”bå¤§äº10aå°äº2æˆ–è€…bå¤§äº10 [[ ]] æ˜¯ä»€ä¹ˆï¼Ÿ å­—ç¬¦ä¸²è¿ç®—ç¬¦ è¿ç®—ç¬¦ è¯´æ˜ = æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ != æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ -z æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0 -n æ£€æµ‹å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸ä¸º0 $ æ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ä¸ä¸ºç©º 123456789101112131415161718192021222324252627282930313233343536373839#!/bin/basha=\"abc\"b=\"def\"if [ $a = $b ]then echo \"aç­‰äºb\"else echo \"aä¸ç­‰äºb\"fiif [ $a != $b]then echo \"aä¸ç­‰äºb\"else echo \"aç­‰äºb\"fiif [ -z $a ]then echo \"açš„é•¿åº¦ä¸º0\"else echo \"açš„é•¿åº¦ä¸ä¸º0\"fiif [ -n $a ]then echo \"açš„é•¿åº¦ä¸ä¸º0\"else echo \"açš„é•¿åº¦ä¸º0\"fiif [ $a ]then echo \"aä¸ä¸ºç©º\"else echo \"aä¸ºç©º\"fi è¾“å‡ºï¼š 123456âœ sh test.shaä¸ç­‰äºbaä¸ç­‰äºbaçš„é•¿åº¦ä¸ä¸º0açš„é•¿åº¦ä¸ä¸º0aä¸ä¸ºç©º æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦ è¿ç®—ç¬¦ è¯´æ˜ ä¸¾ä¾‹ -b file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å—è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -b $file ] è¿”å› falseã€‚ -c file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -c $file ] è¿”å› falseã€‚ -d file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯ç›®å½•ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -d $file ] è¿”å› falseã€‚ -f file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯æ™®é€šæ–‡ä»¶ï¼ˆæ—¢ä¸æ˜¯ç›®å½•ï¼Œä¹Ÿä¸æ˜¯è®¾å¤‡æ–‡ä»¶ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -f $file ] è¿”å› trueã€‚ -g file æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SGID ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -g $file ] è¿”å› falseã€‚ -k file æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº†ç²˜ç€ä½(Sticky Bit)ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -k $file ] è¿”å› falseã€‚ -p file æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯æœ‰åç®¡é“ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -p $file ] è¿”å› falseã€‚ -u file æ£€æµ‹æ–‡ä»¶æ˜¯å¦è®¾ç½®äº† SUID ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -u $file ] è¿”å› falseã€‚ -r file æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯è¯»ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -r $file ] è¿”å› trueã€‚ -w file æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯å†™ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -w $file ] è¿”å› trueã€‚ -x file æ£€æµ‹æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -x $file ] è¿”å› trueã€‚ -s file æ£€æµ‹æ–‡ä»¶æ˜¯å¦ä¸ºç©ºï¼ˆæ–‡ä»¶å¤§å°æ˜¯å¦å¤§äº0ï¼‰ï¼Œä¸ä¸ºç©ºè¿”å› trueã€‚ [ -s $file ] è¿”å› trueã€‚ -e file æ£€æµ‹æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç›®å½•ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å› trueã€‚ [ -e $file ] è¿”å› trueã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445#!/bin/bashfile=\"/var/www/runoob/test.sh\"if [ -r $file ]then echo \"æ–‡ä»¶å¯è¯»\"else echo \"æ–‡ä»¶ä¸å¯è¯»\"fiif [ -w $file ]then echo \"æ–‡ä»¶å¯å†™\"else echo \"æ–‡ä»¶ä¸å¯å†™\"fiif [ -x $file ]then echo \"æ–‡ä»¶å¯æ‰§è¡Œ\"else echo \"æ–‡ä»¶ä¸å¯æ‰§è¡Œ\"fiif [ -f $file ]then echo \"æ–‡ä»¶ä¸ºæ™®é€šæ–‡ä»¶\"else echo \"æ–‡ä»¶ä¸ºç‰¹æ®Šæ–‡ä»¶\"fiif [ -d $file ]then echo \"æ–‡ä»¶æ˜¯ä¸ªç›®å½•\"else echo \"æ–‡ä»¶ä¸æ˜¯ä¸ªç›®å½•\"fiif [ -s $file ]then echo \"æ–‡ä»¶ä¸ä¸ºç©º\"else echo \"æ–‡ä»¶ä¸ºç©º\"fiif [ -e $file ]then echo \"æ–‡ä»¶å­˜åœ¨\"else echo \"æ–‡ä»¶ä¸å­˜åœ¨\"fi è¾“å‡ºï¼š 1234567æ–‡ä»¶å¯è¯»æ–‡ä»¶å¯å†™æ–‡ä»¶å¯æ‰§è¡Œæ–‡ä»¶ä¸ºæ™®é€šæ–‡ä»¶æ–‡ä»¶ä¸æ˜¯ä¸ªç›®å½•æ–‡ä»¶ä¸ä¸ºç©ºæ–‡ä»¶å­˜åœ¨ æ•°ç»„ä¸å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œæ•°ç»„ä¸‹æ ‡ä»0å¼€å§‹ï¼Œä¸”Bash Shellåªæ”¯æŒä¸€ç»´æ•°ç»„ã€‚Shell æ•°ç»„ç”¨æ‹¬å·æ¥è¡¨ç¤ºï¼Œå…ƒç´ ç”¨ç©ºæ ¼åˆ†å¼€. å®šä¹‰æ•°ç»„1array=(A B C \"D\") ä¹Ÿå¯ä½¿ä½¿ç”¨ä¸‹æ ‡æ¥å®šä¹‰æ•°ç»„ 1234array[0]=Aarray[1]=Barray[2]=Carray[3]=\"D\" è¯»å–æ•°ç»„è¯»å–æ•°ç»„çš„æ ¼å¼ä¸ºï¼š ${array[index]} 1234567#!/bin/basharray=(A B C \"D\")echo \"ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š${array[0]}\"echo \"ç¬¬äºŒä¸ªå…ƒç´ ï¼š${array[1]}\"echo \"ç¬¬ä¸‰ä¸ªå…ƒç´ ï¼š${array[2]}\"echo \"ç¬¬å››ä¸ªå…ƒç´ ï¼š${array[3]}\" è¾“å‡ºï¼š 12345âœ sh test.shç¬¬ä¸€ä¸ªå…ƒç´ ï¼šAç¬¬äºŒä¸ªå…ƒç´ ï¼šBç¬¬ä¸‰ä¸ªå…ƒç´ ï¼šCç¬¬å››ä¸ªå…ƒç´ ï¼šD è·å–æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ä½¿ç”¨@æˆ–è€…*æ¥è·å–æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´  12345#!/bin/basharray=(A B C D)echo \"æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ${array[*]}\"echo \"æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ${array[@]}\" è¾“å‡ºï¼š 123âœ sh test.shæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ A B C Dæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ A B C D è·å–æ•°ç»„çš„é•¿åº¦è·å–æ•°ç»„é•¿åº¦çš„æ–¹æ³•ä¸å­—ç¬¦ä¸²ç±»ä¼¼ã€‚ 12345#!/bin/basharray=(A B C D)echo \"æ•°ç»„å…ƒç´ ä¸ªæ•°${#array[*]}\"echo \"æ•°ç»„å…ƒç´ ä¸ªæ•°${#array[@]}\" è¾“å‡ºï¼š 123âœ sh test.shæ•°ç»„å…ƒç´ ä¸ªæ•°4æ•°ç»„å…ƒç´ ä¸ªæ•°4 æµç¨‹æ§åˆ¶ifæ ¼å¼ 1234if æ¡ä»¶then æ‰§è¡Œè¯­å¥fi if else123456if æ¡ä»¶then æ‰§è¡Œè¯­å¥else æ‰§è¡Œè¯­å¥2fi if else-if else123456789if æ¡ä»¶then æ‰§è¡Œè¯­å¥elif æ¡ä»¶2then æ‰§è¡Œè¯­å¥2else æ‰§è¡Œè¯­å¥3fi foræ ¼å¼ï¼š 1234for item in itemsdo æ‰§è¡Œå‘½ä»¤done ä¾‹å­ï¼š 123456#!/bin/bashfor item in 1 2 3 4do echo $itemdone 1234567#!/bin/basharr=(1 2 3 4)for item in ${arr[*]}do echo $itemdone ä»¥ä¸Šä¸¤ä¸ªéƒ½ä¼šè¾“å‡ºï¼š 12341234 whileæ ¼å¼ï¼š 1234while æ¡ä»¶do æ‰§è¡Œå‘½ä»¤done ä¾‹å­ï¼š 12345678#!/bin/basha=1while [ $a -lt 5 ]do echo $a a=`expr $a + 1`done è¾“å‡ºï¼š 12345âœ sh test.sh1234 whileå¾ªç¯å¯ç”¨äºè¯»å–é”®ç›˜ä¿¡æ¯ï¼šåªæœ‰å½“ç”¨æˆ·æŒ‰ä¸‹ ctrl+D æ—¶ç¨‹åºæ‰ä¼šé€€å‡º 1234567#!/bin/bashecho \"è¯·è¾“å…¥ä½ çš„åå­—ï¼š ï¼ˆæŒ‰ ctrl+d é€€å‡ºï¼‰\"while read inputdo echo \"hello ${input}\"done è¾“å‡ºï¼š 123456âœ sh test.shè¯·è¾“å…¥ä½ çš„åå­—ï¼š ï¼ˆæŒ‰ ctrl+d é€€å‡ºï¼‰å´å½¦ç¥–hello å´å½¦ç¥–å¤å¤©ä¹hello å¤å¤©ä¹ untiluntilä¸whileç›¸åï¼Œå½“æ¡ä»¶æˆç«‹æ—¶é€€å‡ºæ ¼å¼ï¼š 1234until æ¡ä»¶do æ‰§è¡Œå‘½ä»¤done ä¾‹å­ï¼š 12345678#!/bin/basha=0until [ $a -gt 10 ] do echo $a a=`expr $a + 1`done è¾“å‡ºï¼š 123456789101112âœ sh test.sh012345678910 caseæ ¼å¼ï¼š 1234567891011case å€¼ inå€¼1) å‘½ä»¤1 ;;å€¼2) å‘½ä»¤2 ;;*) å…¶ä»–å€¼ ;;esac ä¾‹å­ï¼š 1234567891011121314151617#!/bin/bashread -p \"è¯·è¾“å…¥1-3ä¹‹é—´çš„æ•°å­—ï¼š\" numcase $num in 1) echo \"ä½ è¾“å…¥çš„æ˜¯1\" ;; 2) echo \"ä½ è¾“å…¥çš„æ˜¯2\" ;; 3) echo \"ä½ è¾“å…¥çš„æ˜¯3\" ;; *) echo \"ä½ æ²¡æœ‰è¾“å…¥1-3ä¹‹é—´çš„æ•°å­—\" ;;esac è¾“å‡ºï¼š 123âœ sh test.shè¯·è¾“å…¥1-3ä¹‹é—´çš„æ•°å­—ï¼š1ä½ è¾“å…¥çš„æ˜¯1 è·³å‡ºå¾ªç¯ä¸PHPè¯­æ³•ç±»ä¼¼continue è·³è¿‡æœ¬æ¬¡å¾ªç¯break è·³å‡ºæ‰€æœ‰å¾ªç¯ å‡½æ•°å‡½æ•°å®šä¹‰æ ¼å¼ï¼š 1234567#!/bin/bashtestFun(){ echo \"11111\";}testFun è¾“å‡ºï¼š 111111 æ‰€æœ‰å‡½æ•°åœ¨ä½¿ç”¨å‰å¿…é¡»å®šä¹‰ å‡½æ•°è¿”å›å€¼123456789101112#!/bin/bashreadFun(){ echo \"æ¼”ç¤ºä¸¤ä¸ªæ•°å­—ç›¸åŠ \" read -p \"è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼š\" first read -p \"è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼š\" second return `expr $first + $second`}readFunecho \"ä¸¤æ•°ä¹‹å’Œä¸º$?\" è¾“å‡ºï¼š 12345âœ sh test.shæ¼”ç¤ºä¸¤ä¸ªæ•°å­—ç›¸åŠ è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—ï¼š1è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—ï¼š2ä¸¤æ•°ä¹‹å’Œä¸º3 å‡½æ•°è¿”å›å€¼åœ¨è°ƒç”¨è¯¥å‡½æ•°åé€šè¿‡ $? æ¥è·å¾— å‡½æ•°å‚æ•°1234567891011#!/bin/bashparamFun(){ echo \"ç¬¬ä¸€ä¸ªå‚æ•°ï¼š${1}\" echo \"ç¬¬äºŒä¸ªå‚æ•°ï¼š$2\" echo \"ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š$3\" echo \"ä¸€å…±æœ‰${#}ä¸ªå‚æ•°\" echo \"è¾“å‡ºæ‰€æœ‰å‚æ•°ï¼š$@\"}paramFun 1 2 3 4 è¾“å‡ºï¼š 123456âœ sh test.shç¬¬ä¸€ä¸ªå‚æ•°ï¼š1ç¬¬äºŒä¸ªå‚æ•°ï¼š2ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š3ä¸€å…±æœ‰4ä¸ªå‚æ•°è¾“å‡ºæ‰€æœ‰å‚æ•°ï¼š1 2 3 4 ä¸æ‰§è¡Œè„šæœ¬æ—¶ä¼ å…¥å‚æ•°ç±»ä¼¼ï¼Œè°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥å‚æ•°ç”¨ç©ºæ ¼éš”å¼€ï¼Œåœ¨å‡½æ•°å†…éƒ¨é€šè¿‡$nçš„å½¢å¼æ¥è·å–ä¼ å…¥å‚æ•° éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“è·å–ç¬¬n&gt;=10ä¸ªå‚æ•°æ—¶ï¼Œéœ€è¦é€šè¿‡${n}çš„å½¢å¼æ¥è·å–ï¼Œå½“ç„¶å°äº10çš„æ—¶å€™ä¹Ÿæ˜¯èƒ½é€šè¿‡${n}çš„å½¢å¼æ¥è·å–å‚æ•° printfé»˜è®¤ printf ä¸ä¼šåƒ echo è‡ªåŠ¨æ·»åŠ æ¢è¡Œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ·»åŠ  \\nã€‚ 12echo \"hello\"printf \"hello\\n\" ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ç±»ä¼¼ 1234#!/bin/bashprintf \"ä½ å¥½ï¼Œæˆ‘ä»Šå¹´%så²\" 18printf \"æˆ‘çš„åå­—å«ï¼š%-3s\" ç†Šå°å¸…printf \"æˆ‘çš„ä½“é‡æ˜¯ï¼š%-4.2fkg\" 70.5 è¾“å‡ºï¼š 1234âœ sh test.shä½ å¥½ï¼Œæˆ‘ä»Šå¹´18å²æˆ‘çš„åå­—å«ï¼šç†Šå°å¸…æˆ‘çš„ä½“é‡æ˜¯ï¼š70.50kg %-3s -è¡¨ç¤ºå·¦å¯¹é½ï¼Œ3 è¡¨ç¤ºæ˜¾ç¤º3ä¸ªå­—ç¬¦ï¼Œ%-4.2f .2è¡¨ç¤ºä¿ç•™ä¸¤ä½å°æ•°","link":"/2019/07/14/shell-script-leaning/"}],"tags":[{"name":"Homebrew","slug":"Homebrew","link":"/tags/Homebrew/"},{"name":"LNMP","slug":"LNMP","link":"/tags/LNMP/"},{"name":"openSSL","slug":"openSSL","link":"/tags/openSSL/"},{"name":"RSA","slug":"RSA","link":"/tags/RSA/"},{"name":"å¹¶å‘","slug":"å¹¶å‘","link":"/tags/å¹¶å‘/"},{"name":"Redis","slug":"Redis","link":"/tags/Redis/"},{"name":"Safari","slug":"Safari","link":"/tags/Safari/"},{"name":"MongoDB","slug":"MongoDB","link":"/tags/MongoDB/"},{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","link":"/tags/æ•°æ®åº“/"}],"categories":[{"name":"Skills","slug":"Skills","link":"/categories/Skills/"},{"name":"PHP","slug":"PHP","link":"/categories/PHP/"},{"name":"Redis","slug":"Redis","link":"/categories/Redis/"},{"name":"MongoDB","slug":"MongoDB","link":"/categories/MongoDB/"},{"name":"Shell","slug":"Shell","link":"/categories/Shell/"}]}